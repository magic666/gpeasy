(function(d){d.widget("ui.draggable",d.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||
/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(a){var b=this.options;return this.helper||b.disabled||0<d(a.target).closest(".ui-resizable-handle").length?
!1:(this.handle=this._getHandle(a),this.handle?(d(!0===b.iframeFix?"iframe":b.iframeFix).each(function(){d("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(d(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(a){var b=this.options;return this.helper=this._createHelper(a),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),
d.ui.ddmanager&&(d.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},
parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(a),this.originalPageX=a.pageX,this.originalPageY=a.pageY,b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt),this._setContainment(),!1===this._trigger("start",a)?(this._clear(),!1):(this._cacheHelperProportions(),d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a),this._mouseDrag(a,!0),d.ui.ddmanager&&d.ui.ddmanager.dragStart(this,a),!0)},_mouseDrag:function(a,
b){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(a),this.positionAbs=this._convertPositionTo("absolute"),!b){var c=this._uiHash();if(!1===this._trigger("drag",a,c))return this._mouseUp({}),!1;this.position=c.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),d.ui.ddmanager&&
d.ui.ddmanager.drag(this,a),!1},_mouseStop:function(a){var b=this,c=!1;return d.ui.ddmanager&&!this.options.dropBehaviour&&(c=d.ui.ddmanager.drop(this,a)),this.dropped&&(c=this.dropped,this.dropped=!1),"original"!==this.options.helper||d.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!c||"valid"===this.options.revert&&c||!0===this.options.revert||d.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)?d(this.helper).animate(this.originalPosition,
parseInt(this.options.revertDuration,10),function(){!1!==b._trigger("stop",a)&&b._clear()}):!1!==this._trigger("stop",a)&&this._clear(),!1):!1},_mouseUp:function(a){return d("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),d.ui.ddmanager&&d.ui.ddmanager.dragStop(this,a),d.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(a){return this.options.handle?
!!d(a.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(a){var b=this.options;a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a])):"clone"===b.helper?this.element.clone().removeAttr("id"):this.element;return a.parents("body").length||a.appendTo("parent"===b.appendTo?this.element[0].parentNode:b.appendTo),a[0]===this.element[0]||/(fixed|absolute)/.test(a.css("position"))||a.css("position","absolute"),a},_adjustOffsetFromHelper:function(a){"string"==
typeof a&&(a=a.split(" "));d.isArray(a)&&(a={left:+a[0],top:+a[1]||0});"left"in a&&(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left);"top"in a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){var a=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&
d.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&d.ui.ie)&&(a={top:0,left:0}),{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.element.position();
return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions=
{width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a,b,c,e=this.options;return e.containment?"window"===e.containment?(this.containment=[d(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,d(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,d(window).scrollLeft()+d(window).width()-this.helperProportions.width-this.margins.left,d(window).scrollTop()+(d(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top],void 0):"document"===e.containment?(this.containment=[0,0,d(document).width()-this.helperProportions.width-this.margins.left,(d(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):e.containment.constructor===Array?(this.containment=e.containment,void 0):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),b=d(e.containment),c=b[0],c&&(a="hidden"!==b.css("overflow"),this.containment=[(parseInt(b.css("borderLeftWidth"),
10)||0)+(parseInt(b.css("paddingLeft"),10)||0),(parseInt(b.css("borderTopWidth"),10)||0)+(parseInt(b.css("paddingTop"),10)||0),(a?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(b.css("borderRightWidth"),10)||0)-(parseInt(b.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(a?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(b.css("borderBottomWidth"),10)||0)-(parseInt(b.css("paddingBottom"),10)||0)-this.helperProportions.height-
this.margins.top-this.margins.bottom],this.relative_container=b),void 0):(this.containment=null,void 0)},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&d.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:e.scrollTop(),left:e.scrollLeft()}),{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===
this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*c}},_generatePosition:function(a){var b,c,e,g,h=this.options,p="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&d.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,m=a.pageX,l=a.pageY;return this.offset.scroll||(this.offset.scroll=
{top:p.scrollTop(),left:p.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(c=this.relative_container.offset(),b=[this.containment[0]+c.left,this.containment[1]+c.top,this.containment[2]+c.left,this.containment[3]+c.top]):b=this.containment,a.pageX-this.offset.click.left<b[0]&&(m=b[0]+this.offset.click.left),a.pageY-this.offset.click.top<b[1]&&(l=b[1]+this.offset.click.top),a.pageX-this.offset.click.left>b[2]&&(m=b[2]+this.offset.click.left),a.pageY-this.offset.click.top>
b[3]&&(l=b[3]+this.offset.click.top)),h.grid&&(e=h.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/h.grid[1])*h.grid[1]:this.originalPageY,l=b?e-this.offset.click.top>=b[1]||e-this.offset.click.top>b[3]?e:e-this.offset.click.top>=b[1]?e-h.grid[1]:e+h.grid[1]:e,g=h.grid[0]?this.originalPageX+Math.round((m-this.originalPageX)/h.grid[0])*h.grid[0]:this.originalPageX,m=b?g-this.offset.click.left>=b[0]||g-this.offset.click.left>b[2]?g:g-this.offset.click.left>=b[0]?g-h.grid[0]:g+h.grid[0]:
g)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:m-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=
!1},_trigger:function(a,b,c){return c=c||this._uiHash(),d.ui.plugin.call(this,a,[b,c]),"drag"===a&&(this.positionAbs=this._convertPositionTo("absolute")),d.Widget.prototype._trigger.call(this,a,b,c)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});d.ui.plugin.add("draggable","connectToSortable",{start:function(a,b){var c=d(this).data("ui-draggable"),e=c.options,g=d.extend({},b,{item:c.element});c.sortables=
[];d(e.connectToSortable).each(function(){var b=d.data(this,"ui-sortable");b&&!b.options.disabled&&(c.sortables.push({instance:b,shouldRevert:b.options.revert}),b.refreshPositions(),b._trigger("activate",a,g))})},stop:function(a,b){var c=d(this).data("ui-draggable"),e=d.extend({},b,{item:c.element});d.each(c.sortables,function(){this.instance.isOver?(this.instance.isOver=0,c.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),
this.instance._mouseStop(a),this.instance.options.helper=this.instance.options._helper,"original"===c.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,e))})},drag:function(a,b){var c=d(this).data("ui-draggable"),e=this;d.each(c.sortables,function(){var g=!1,h=this;this.instance.positionAbs=c.positionAbs;this.instance.helperProportions=c.helperProportions;this.instance.offset.click=c.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&
(g=!0,d.each(c.sortables,function(){return this.instance.positionAbs=c.positionAbs,this.instance.helperProportions=c.helperProportions,this.instance.offset.click=c.offset.click,this!==h&&this.instance._intersectsWith(this.instance.containerCache)&&d.contains(h.instance.element[0],this.instance.element[0])&&(g=!1),g}));g?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=d(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=
this.instance.options.helper,this.instance.options.helper=function(){return b.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,!0),this.instance._mouseStart(a,!0,!0),this.instance.offset.click.top=c.offset.click.top,this.instance.offset.click.left=c.offset.click.left,this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top,c._trigger("toSortable",a),c.dropped=
this.instance.element,c.currentItem=c.element,this.instance.fromOutside=c),this.instance.currentItem&&this.instance._mouseDrag(a)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),
c._trigger("fromSortable",a),c.dropped=!1)})}});d.ui.plugin.add("draggable","cursor",{start:function(){var a=d("body"),b=d(this).data("ui-draggable").options;a.css("cursor")&&(b._cursor=a.css("cursor"));a.css("cursor",b.cursor)},stop:function(){var a=d(this).data("ui-draggable").options;a._cursor&&d("body").css("cursor",a._cursor)}});d.ui.plugin.add("draggable","opacity",{start:function(a,b){var c=d(b.helper),e=d(this).data("ui-draggable").options;c.css("opacity")&&(e._opacity=c.css("opacity"));c.css("opacity",
e.opacity)},stop:function(a,b){var c=d(this).data("ui-draggable").options;c._opacity&&d(b.helper).css("opacity",c._opacity)}});d.ui.plugin.add("draggable","scroll",{start:function(){var a=d(this).data("ui-draggable");a.scrollParent[0]!==document&&"HTML"!==a.scrollParent[0].tagName&&(a.overflowOffset=a.scrollParent.offset())},drag:function(a){var b=d(this).data("ui-draggable"),c=b.options,e=!1;b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName?(c.axis&&"x"===c.axis||(b.overflowOffset.top+
b.scrollParent[0].offsetHeight-a.pageY<c.scrollSensitivity?b.scrollParent[0].scrollTop=e=b.scrollParent[0].scrollTop+c.scrollSpeed:a.pageY-b.overflowOffset.top<c.scrollSensitivity&&(b.scrollParent[0].scrollTop=e=b.scrollParent[0].scrollTop-c.scrollSpeed)),c.axis&&"y"===c.axis||(b.overflowOffset.left+b.scrollParent[0].offsetWidth-a.pageX<c.scrollSensitivity?b.scrollParent[0].scrollLeft=e=b.scrollParent[0].scrollLeft+c.scrollSpeed:a.pageX-b.overflowOffset.left<c.scrollSensitivity&&(b.scrollParent[0].scrollLeft=
e=b.scrollParent[0].scrollLeft-c.scrollSpeed))):(c.axis&&"x"===c.axis||(a.pageY-d(document).scrollTop()<c.scrollSensitivity?e=d(document).scrollTop(d(document).scrollTop()-c.scrollSpeed):d(window).height()-(a.pageY-d(document).scrollTop())<c.scrollSensitivity&&(e=d(document).scrollTop(d(document).scrollTop()+c.scrollSpeed))),c.axis&&"y"===c.axis||(a.pageX-d(document).scrollLeft()<c.scrollSensitivity?e=d(document).scrollLeft(d(document).scrollLeft()-c.scrollSpeed):d(window).width()-(a.pageX-d(document).scrollLeft())<
c.scrollSensitivity&&(e=d(document).scrollLeft(d(document).scrollLeft()+c.scrollSpeed))));!1!==e&&d.ui.ddmanager&&!c.dropBehaviour&&d.ui.ddmanager.prepareOffsets(b,a)}});d.ui.plugin.add("draggable","snap",{start:function(){var a=d(this).data("ui-draggable"),b=a.options;a.snapElements=[];d(b.snap.constructor!==String?b.snap.items||":data(ui-draggable)":b.snap).each(function(){var b=d(this),e=b.offset();this!==a.element[0]&&a.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),
top:e.top,left:e.left})})},drag:function(a,b){var c,e,g,h,p,m,l,q,k,t,f=d(this).data("ui-draggable"),u=f.options,n=u.snapTolerance,r=b.offset.left,v=r+f.helperProportions.width,s=b.offset.top,w=s+f.helperProportions.height;for(k=f.snapElements.length-1;0<=k;k--)p=f.snapElements[k].left,m=p+f.snapElements[k].width,l=f.snapElements[k].top,q=l+f.snapElements[k].height,p-n>v||r>m+n||l-n>w||s>q+n||!d.contains(f.snapElements[k].item.ownerDocument,f.snapElements[k].item)?(f.snapElements[k].snapping&&f.options.snap.release&&
f.options.snap.release.call(f.element,a,d.extend(f._uiHash(),{snapItem:f.snapElements[k].item})),f.snapElements[k].snapping=!1):("inner"!==u.snapMode&&(c=n>=Math.abs(l-w),e=n>=Math.abs(q-s),g=n>=Math.abs(p-v),h=n>=Math.abs(m-r),c&&(b.position.top=f._convertPositionTo("relative",{top:l-f.helperProportions.height,left:0}).top-f.margins.top),e&&(b.position.top=f._convertPositionTo("relative",{top:q,left:0}).top-f.margins.top),g&&(b.position.left=f._convertPositionTo("relative",{top:0,left:p-f.helperProportions.width}).left-
f.margins.left),h&&(b.position.left=f._convertPositionTo("relative",{top:0,left:m}).left-f.margins.left)),t=c||e||g||h,"outer"!==u.snapMode&&(c=n>=Math.abs(l-s),e=n>=Math.abs(q-w),g=n>=Math.abs(p-r),h=n>=Math.abs(m-v),c&&(b.position.top=f._convertPositionTo("relative",{top:l,left:0}).top-f.margins.top),e&&(b.position.top=f._convertPositionTo("relative",{top:q-f.helperProportions.height,left:0}).top-f.margins.top),g&&(b.position.left=f._convertPositionTo("relative",{top:0,left:p}).left-f.margins.left),
h&&(b.position.left=f._convertPositionTo("relative",{top:0,left:m-f.helperProportions.width}).left-f.margins.left)),!f.snapElements[k].snapping&&(c||e||g||h||t)&&f.options.snap.snap&&f.options.snap.snap.call(f.element,a,d.extend(f._uiHash(),{snapItem:f.snapElements[k].item})),f.snapElements[k].snapping=c||e||g||h||t)}});d.ui.plugin.add("draggable","stack",{start:function(){var a,b=this.data("ui-draggable").options,b=d.makeArray(d(b.stack)).sort(function(a,b){return(parseInt(d(a).css("zIndex"),10)||
0)-(parseInt(d(b).css("zIndex"),10)||0)});b.length&&(a=parseInt(d(b[0]).css("zIndex"),10)||0,d(b).each(function(b){d(this).css("zIndex",a+b)}),this.css("zIndex",a+b.length))}});d.ui.plugin.add("draggable","zIndex",{start:function(a,b){var c=d(b.helper),e=d(this).data("ui-draggable").options;c.css("zIndex")&&(e._zIndex=c.css("zIndex"));c.css("zIndex",e.zIndex)},stop:function(a,b){var c=d(this).data("ui-draggable").options;c._zIndex&&d(b.helper).css("zIndex",c._zIndex)}})})(jQuery);