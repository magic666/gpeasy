(function(f){f.widget("ui.selectable",f.ui.mouse,{version:"1.10.3",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var a,e=this;this.element.addClass("ui-selectable");this.dragged=!1;this.refresh=function(){a=f(e.options.filter,e.element[0]);a.addClass("ui-selectee");a.each(function(){var a=f(this),d=a.offset();f.data(this,"selectable-item",{element:this,$element:a,
left:d.left,top:d.top,right:d.left+a.outerWidth(),bottom:d.top+a.outerHeight(),startselected:!1,selected:a.hasClass("ui-selected"),selecting:a.hasClass("ui-selecting"),unselecting:a.hasClass("ui-unselecting")})})};this.refresh();this.selectees=a.addClass("ui-selectee");this._mouseInit();this.helper=f("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");
this._mouseDestroy()},_mouseStart:function(a){var e=this,c=this.options;this.opos=[a.pageX,a.pageY];this.options.disabled||(this.selectees=f(c.filter,this.element[0]),this._trigger("start",a),f(c.appendTo).append(this.helper),this.helper.css({left:a.pageX,top:a.pageY,width:0,height:0}),c.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=f.data(this,"selectable-item");d.startselected=!0;a.metaKey||a.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,
d.$element.addClass("ui-unselecting"),d.unselecting=!0,e._trigger("unselecting",a,{unselecting:d.element}))}),f(a.target).parents().addBack().each(function(){var d,c=f.data(this,"selectable-item");return c?(d=!a.metaKey&&!a.ctrlKey||!c.$element.hasClass("ui-selected"),c.$element.removeClass(d?"ui-unselecting":"ui-selected").addClass(d?"ui-selecting":"ui-unselecting"),c.unselecting=!d,c.selecting=d,c.selected=d,d?e._trigger("selecting",a,{selecting:c.element}):e._trigger("unselecting",a,{unselecting:c.element}),
!1):void 0}))},_mouseDrag:function(a){if(this.dragged=!0,!this.options.disabled){var e,c=this,d=this.options,g=this.opos[0],h=this.opos[1],k=a.pageX,l=a.pageY;return g>k&&(e=k,k=g,g=e),h>l&&(e=l,l=h,h=e),this.helper.css({left:g,top:h,width:k-g,height:l-h}),this.selectees.each(function(){var b=f.data(this,"selectable-item"),e=!1;b&&b.element!==c.element[0]&&("touch"===d.tolerance?e=!(b.left>k||g>b.right||b.top>l||h>b.bottom):"fit"===d.tolerance&&(e=b.left>g&&k>b.right&&b.top>h&&l>b.bottom),e?(b.selected&&
(b.$element.removeClass("ui-selected"),b.selected=!1),b.unselecting&&(b.$element.removeClass("ui-unselecting"),b.unselecting=!1),b.selecting||(b.$element.addClass("ui-selecting"),b.selecting=!0,c._trigger("selecting",a,{selecting:b.element}))):(b.selecting&&((a.metaKey||a.ctrlKey)&&b.startselected?(b.$element.removeClass("ui-selecting"),b.selecting=!1,b.$element.addClass("ui-selected"),b.selected=!0):(b.$element.removeClass("ui-selecting"),b.selecting=!1,b.startselected&&(b.$element.addClass("ui-unselecting"),
b.unselecting=!0),c._trigger("unselecting",a,{unselecting:b.element}))),b.selected&&(a.metaKey||a.ctrlKey||b.startselected||(b.$element.removeClass("ui-selected"),b.selected=!1,b.$element.addClass("ui-unselecting"),b.unselecting=!0,c._trigger("unselecting",a,{unselecting:b.element})))))}),!1}},_mouseStop:function(a){var e=this;return this.dragged=!1,f(".ui-unselecting",this.element[0]).each(function(){var c=f.data(this,"selectable-item");c.$element.removeClass("ui-unselecting");c.unselecting=!1;c.startselected=
!1;e._trigger("unselected",a,{unselected:c.element})}),f(".ui-selecting",this.element[0]).each(function(){var c=f.data(this,"selectable-item");c.$element.removeClass("ui-selecting").addClass("ui-selected");c.selecting=!1;c.selected=!0;c.startselected=!0;e._trigger("selected",a,{selected:c.element})}),this._trigger("stop",a),this.helper.remove(),!1}})})(jQuery);